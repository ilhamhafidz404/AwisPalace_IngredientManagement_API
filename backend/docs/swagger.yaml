basePath: /
definitions:
  dto.AuthData:
    properties:
      token:
        type: string
      user:
        $ref: '#/definitions/dto.UserData'
    type: object
  dto.AuthResponse:
    properties:
      data:
        $ref: '#/definitions/dto.AuthData'
      message:
        type: string
      status:
        type: string
    type: object
  dto.GoogleAuthRequest:
    properties:
      email:
        type: string
      id_token:
        type: string
      name:
        type: string
      photo_url:
        type: string
    required:
    - email
    - id_token
    type: object
  dto.IngredientParamRequest:
    properties:
      name:
        type: string
      stock:
        type: number
      unit_id:
        type: integer
    type: object
  dto.TransactionCreateRequest:
    properties:
      items:
        items:
          $ref: '#/definitions/dto.TransactionItemRequest'
        type: array
      notes:
        type: string
    required:
    - items
    type: object
  dto.TransactionItemRequest:
    properties:
      menu_id:
        type: integer
      quantity:
        minimum: 1
        type: integer
    required:
    - menu_id
    - quantity
    type: object
  dto.UnitParamRequest:
    properties:
      name:
        type: string
      symbol:
        type: string
    type: object
  dto.UserData:
    properties:
      email:
        type: string
      id:
        type: integer
      name:
        type: string
      photo_url:
        type: string
    type: object
host: localhost:8080
info:
  contact: {}
  description: API documentation for Awis Palace Ingredient Management built with
    Gin and GORM.
  title: Awis Palace Ingredient Management API
  version: "1.0"
paths:
  /auth/google:
    post:
      consumes:
      - application/json
      description: Authenticate user with Google ID token
      parameters:
      - description: Google authentication data
        in: body
        name: auth
        required: true
        schema:
          $ref: '#/definitions/dto.GoogleAuthRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Login successful
          schema:
            $ref: '#/definitions/dto.AuthResponse'
        "201":
          description: User created and logged in
          schema:
            $ref: '#/definitions/dto.AuthResponse'
        "400":
          description: Invalid request
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Invalid ID token
          schema:
            additionalProperties: true
            type: object
        "500":
          description: Internal server error
          schema:
            additionalProperties: true
            type: object
      summary: Authenticate with Google
      tags:
      - Authentication
  /auth/refresh:
    post:
      consumes:
      - application/json
      description: Generate a new JWT token from existing valid token
      produces:
      - application/json
      responses:
        "200":
          description: New token generated
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Invalid or missing token
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Refresh JWT token
      tags:
      - Authentication
  /auth/verify:
    get:
      consumes:
      - application/json
      description: Verify if the provided JWT token is valid
      produces:
      - application/json
      responses:
        "200":
          description: Token is valid
          schema:
            additionalProperties: true
            type: object
        "401":
          description: Invalid or missing token
          schema:
            additionalProperties: true
            type: object
      security:
      - BearerAuth: []
      summary: Verify JWT token
      tags:
      - Authentication
  /export/transactions:
    get:
      consumes:
      - application/json
      description: 'Export transaction data with ingredient usage to Excel file. Returns
        Excel file with 3 sheets: Transactions (all transaction details), Ingredient
        Usage (ingredients used per transaction with stock changes), and Summary (statistics
        and top selling items). Supports date range filtering, defaults to last 30
        days if dates not specified.'
      parameters:
      - description: Start date in YYYY-MM-DD format. Defaults to 30 days ago if not
          specified.
        example: "2024-01-01"
        in: query
        name: start_date
        type: string
      - description: End date in YYYY-MM-DD format. Defaults to today if not specified.
        example: "2024-12-31"
        in: query
        name: end_date
        type: string
      produces:
      - application/vnd.openxmlformats-officedocument.spreadsheetml.sheet
      responses: {}
      summary: Export Transactions to Excel
      tags:
      - Transactions
  /ingredients:
    get:
      description: Get Ingredients
      responses: {}
      summary: Get Ingredients
      tags:
      - Ingredients
    post:
      description: Post Ingredients
      parameters:
      - description: Create ingredient
        in: body
        name: ingredient
        required: true
        schema:
          $ref: '#/definitions/dto.IngredientParamRequest'
      responses: {}
      summary: Post Ingredients
      tags:
      - Ingredients
  /ingredients/{id}:
    delete:
      description: Delete a ingredient by ID
      parameters:
      - description: Ingredient ID
        in: path
        name: id
        required: true
        type: string
      responses: {}
      summary: Delete Ingredient
      tags:
      - Ingredients
    put:
      description: Update an existing ingredient by ID
      parameters:
      - description: Ingredient ID
        in: path
        name: id
        required: true
        type: integer
      - description: Updated ingredient data
        in: body
        name: ingredient
        required: true
        schema:
          $ref: '#/definitions/dto.IngredientParamRequest'
      responses: {}
      summary: Update Ingredient
      tags:
      - Ingredients
  /menus:
    get:
      description: Get all menus with ingredients
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      summary: Get Menus
      tags:
      - Menus
    post:
      consumes:
      - multipart/form-data
      description: Create menu with image upload
      parameters:
      - description: Menu Name
        in: formData
        name: name
        required: true
        type: string
      - description: Menu Price
        in: formData
        name: price
        required: true
        type: number
      - description: Menu Description
        in: formData
        name: description
        type: string
      - description: Ingredients JSON array
        in: formData
        name: ingredients
        required: true
        type: string
      - description: Menu Image
        in: formData
        name: image
        required: true
        type: file
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            additionalProperties: true
            type: object
      summary: Create Menu
      tags:
      - Menus
  /menus/{id}:
    delete:
      description: Delete menu by ID
      parameters:
      - description: Menu ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      summary: Delete Menu
      tags:
      - Menus
    put:
      consumes:
      - multipart/form-data
      description: Update menu by ID with optional image upload
      parameters:
      - description: Menu ID
        in: path
        name: id
        required: true
        type: integer
      - description: Menu Name
        in: formData
        name: name
        required: true
        type: string
      - description: Menu Price
        in: formData
        name: price
        required: true
        type: number
      - description: Menu Description
        in: formData
        name: description
        type: string
      - description: Ingredients JSON array
        in: formData
        name: ingredients
        required: true
        type: string
      - description: Menu Image (optional)
        in: formData
        name: image
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties: true
            type: object
      summary: Update Menu
      tags:
      - Menus
  /transactions:
    get:
      description: 'Get Transactions with optional date filter (default: this week)'
      parameters:
      - description: Start date (YYYY-MM-DD)
        in: query
        name: start_date
        type: string
      - description: End date (YYYY-MM-DD)
        in: query
        name: end_date
        type: string
      responses: {}
      summary: Get Transactions
      tags:
      - Transactions
    post:
      description: Create Transaction
      parameters:
      - description: Create transaction
        in: body
        name: transaction
        required: true
        schema:
          $ref: '#/definitions/dto.TransactionCreateRequest'
      responses: {}
      summary: Create Transaction
      tags:
      - Transactions
  /transactions/{id}:
    delete:
      description: Delete Transaction by ID (and restore stock)
      parameters:
      - description: Transaction ID
        in: path
        name: id
        required: true
        type: integer
      responses: {}
      summary: Delete Transaction
      tags:
      - Transactions
    get:
      description: Get Transaction by ID
      parameters:
      - description: Transaction ID
        in: path
        name: id
        required: true
        type: integer
      responses: {}
      summary: Get Transaction
      tags:
      - Transactions
  /units:
    get:
      description: Get Units
      responses: {}
      summary: Get Units
      tags:
      - Units
    post:
      description: Post Units
      parameters:
      - description: Unit data
        in: body
        name: unit
        required: true
        schema:
          $ref: '#/definitions/dto.UnitParamRequest'
      responses: {}
      summary: Post Units
      tags:
      - Units
  /units/{id}:
    delete:
      description: Delete a unit by ID
      parameters:
      - description: Unit ID
        in: path
        name: id
        required: true
        type: string
      responses: {}
      summary: Delete Unit
      tags:
      - Units
    put:
      description: Update an existing unit by ID
      parameters:
      - description: Unit ID
        in: path
        name: id
        required: true
        type: integer
      - description: Updated unit data
        in: body
        name: unit
        required: true
        schema:
          $ref: '#/definitions/dto.UnitParamRequest'
      responses: {}
      summary: Update Unit
      tags:
      - Units
  /users:
    get:
      description: Get Users
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Get Users
      tags:
      - Users
swagger: "2.0"
